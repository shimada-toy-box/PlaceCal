<h1 class="page-header">Edit User: <%= @user.full_name %></h1>

<div class="behavior-trigger" data-behavior="user.form"></div>

<%#
  These are fields that should be displayed *in addition* to ones that are disabled?
  Not 100% sure why but I dont want to break existing functionality in other forms
  right now. I'm not 100% sure why we should be able to see and interact with
  elements that we can't edit
  See: app/helpers/application_helper.rb:5
  %>

<%- disabled_fields = policy(@user).disabled_attributes %>

<%=  filtered_form_for(@user, method: :put, url: admin_user_path(@user),
                       disabled: disabled_fields) do |f| %>
  <%= render 'form', f: f %>
  <%= f.submit "Update", class: "btn btn-primary " %>
  <% if policy(@user).destroy? -%>
    <%= link_to "Delete user", 
      admin_user_path(@user), 
      method: :delete, 
      class: "btn btn-danger", 
      data: { confirm: "Please confirm you want to delete this user.\n\nThis is permanent!" } %>
  <% end -%>
<% end %>
