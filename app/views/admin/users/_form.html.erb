<%= render_component "error", object: current_user %>

<div class="form-group">
  <%= render "contact", f: f %>

  <%# f.association :tags, label: false, collection: @tags, as: :check_boxes %>
  <%= f.association :partners,
                    label: tooltip_label('Partners', 'Partners this user can edit, as well as their associated calendars'),
                    collection: options_for_partners,
                    input_html: {class: 'form-control select2' } %>


  <div class="user_neighbourhoods">
    <h3>Neighbourhoods</h3>
    <ul>
      <% @user.neighbourhoods_users.each do |nu| %>
        <li><%= nu.neighbourhood.name %></li>
      <% end %>
    </ul>

    <%= f.simple_fields_for :neighbourhoods_users do |neighbourhood_user| %>
      <%= render 'neighbourhoods_user_fields', f: neighbourhood_user %>
    <% end %>
    <div class="links">
      <%= link_to_add_association 'Add Neighbourhood', f, :neighbourhoods_users, class: "btn btn-primary btn-sm" %>
    </div>
    <br></br>
    <p>Hello?</p>
  </div>

  <% #= f.association :neighbourhoods,
     #               label: tooltip_label('Neighbourhoods', 'Grants access to every partner and calendar in these neighbourhoods. Use with care!'),
     #               collection: options_for_neighbourhoods,
     #               input_html: {class: 'form-control select2' } %>

  <%= f.input :role, collection: @roles, class: 'form-control', include_blank: false %>

  <% if current_user.root? %>
    <%= f.input :facebook_app_id, as: :string %>
    <%= f.input :facebook_app_secret, as: :string %>
  <% end %>
</div>
